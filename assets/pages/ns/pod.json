{
  "type": "page",
  "data": {
    "ns": "${ls:selectedNs||'default'}",
    "kind": "Pod",
    "group": "",
    "version": "v1"
  },
  "body": [
    {
      "type": "container",
      "className": "floating-toolbar",
      "body": [
        {
          "type": "tpl",
          "tpl": "${kind}",
          "className": "mr-2"
        },
        {
          "type": "button",
          "label": "指南",
          "level": "link",
          "icon": "fas fa-compass text-primary",
          "actionType": "drawer",
          "drawer": {
            "overlay": false,
            "closeOnEsc": true,
            "closeOnOutside": true,
            "size": "lg",
            "title": "${kind}指南（ESC 关闭）",
            "body": [
              {
                "type": "websocketMarkdownViewer",
                "url": "/k8s/chat/resource",
                "params": {
                  "kind": "${kind}",
                  "group": "${group}",
                  "version": "${version}"
                }
              }
            ]
          }
        },
        {
          "type": "button",
          "label": "属性文档",
          "level": "link",
          "icon": "fas fa-book-open text-primary",
          "actionType": "drawer",
          "drawer": {
            "overlay": false,
            "closeOnEsc": true,
            "closeOnOutside": true,
            "size": "lg",
            "title": "${kind} 属性文档（ESC 关闭）",
            "body": [
              {
                "type": "page",
                "asideResizor": true,
                "asideSticky": false,
                "asideMinWidth": 300,
                "asideMaxWidth": 600,
                "aside": [
                  {
                    "type": "input-tree",
                    "name": "tree",
                    "initiallyOpen": false,
                    "unfoldedLevel": 1,
                    "searchable": true,
                    "showOutline": true,
                    "showIcon": true,
                    "searchConfig": {
                      "sticky": true
                    },
                    "selectFirst": true,
                    "heightAuto": true,
                    "inputClassName": "no-border no-padder mt-1",
                    "source": "get:/k8s/doc/kind/${kind}/group/${group}/version/${version}",
                    "onEvent": {
                      "change": {
                        "actions": [
                          {
                            "componentId": "detail",
                            "actionType": "reload",
                            "data": {
                              "description": "${event.data.item.description}",
                              "id": "${event.data.item.id}",
                              "type": "${event.data.item.type}"
                            }
                          }
                        ]
                      }
                    }
                  }
                ],
                "toolbar": [
                  {
                    "type": "tpl",
                    "tpl": ""
                  }
                ],
                "body": [
                  {
                    "type": "service",
                    "api": "post:/k8s/doc/detail",
                    "body": [
                      {
                        "type": "tpl",
                        "tpl": "${id}[${type}]<br>${description}</br></br></br>${translate?translate:''}",
                        "wrapperComponent": "",
                        "inline": false
                      }
                    ],
                    "id": "detail"
                  }
                ]
              }
            ]
          }
        },
        {
          "type": "button",
          "label": "样例",
          "level": "link",
          "icon": "fas fa-lightbulb text-primary",
          "actionType": "drawer",
          "drawer": {
            "overlay": false,
            "closeOnEsc": true,
            "closeOnOutside": true,
            "size": "lg",
            "title": "${kind} 参考样例（ESC 关闭）",
            "body": [
              {
                "type": "websocketMarkdownViewer",
                "url": "/k8s/chat/example",
                "params": {
                  "kind": "${kind}",
                  "group": "${group}",
                  "version": "${version}"
                }
              }
            ]
          }
        }
      ]
    },
    {
      "type": "form",
      "mode": "horizontal",
      "wrapWithPanel": false,
      "body": [
        {
          "style": {
            "width": 500,
            "margin": 5
          },
          "label": "命名空间",
          "type": "select",
          "name": "ns",
          "id": "ns",
          "searchable": true,
          "source": "/k8s/ns/option_list",
          "value": "${ls:selectedNs||'default'}",
          "onEvent": {
            "change": {
              "actions": [
                {
                  "actionType": "reload",
                  "componentId": "detailCRUD",
                  "data": {
                    "ns": "${ns}"
                  }
                },
                {
                  "actionType": "custom",
                  "script": "localStorage.setItem('selectedNs', event.data.ns)"
                }
              ]
            }
          }
        }
      ]
    },
    {
      "type": "crud",
      "id": "detailCRUD",
      "name": "detailCRUD",
      "autoFillHeight": false,
      "autoGenerateFilter": {
        "columnsNum": 3,
        "showBtnToolbar": false
      },
      "headerToolbar": [
        {
          "type": "columns-toggler",
          "align": "right",
          "draggable": true,
          "icon": "fas fa-cog",
          "overlay": true,
          "footerBtnSize": "sm"
        },
        "bulkActions",
        "reload",
        {
          "type": "pagination",
          "align": "right"
        },
        {
          "type": "statistics",
          "align": "right"
        },
        {
          "type": "switch-per-page",
          "align": "right"
        }
      ],
      "loadDataOnce": false,
      "syncLocation": true,
      "initFetch": true,
      "perPage": 10,
      "bulkActions": [
        {
          "label": "批量删除",
          "actionType": "ajax",
          "confirmText": "确定要批量删除?",
          "api": {
            "url": "/k8s/$kind/group/$group/version/$version/remove/ns/${ns}/names",
            "method": "post",
            "data": {
              "names": "${selectedItems | pick:metadata.name }"
            }
          }
        }
      ],
      "footerToolbar": [
        {
          "type": "pagination",
          "align": "right"
        },
        {
          "type": "statistics",
          "align": "right"
        },
        {
          "type": "switch-per-page",
          "align": "right"
        }
      ],
      "api": "post:/k8s/$kind/group/$group/version/$version/list/ns/${ns}",
      "columns": [
        {
          "type": "operation",
          "label": "操作",
          "width": 120,
          "buttons": [
            {
              "type": "button",
              "icon": "fas fa-eye text-primary",
              "actionType": "drawer",
              "tooltip": "资源描述",
              "drawer": {
                "closeOnEsc": true,
                "closeOnOutside": true,
                "size": "xl",
                "title": "Describe: ${metadata.name}  (ESC 关闭)",
                "body": [
                  {
                    "type": "service",
                    "api": "post:/k8s/$kind/group/$group/version/$version/describe/ns/$metadata.namespace/name/$metadata.name",
                    "body": [
                      {
                        "type": "button",
                        "label": "AI解读",
                        "icon": "fas fa-brain text-primary",
                        "actionType": "drawer",
                        "drawer": {
                          "closeOnEsc": true,
                          "closeOnOutside": true,
                          "size": "xl",
                          "title": "AI解读  (ESC 关闭)",
                          "body": [
                            {
                              "type": "websocketMarkdownViewer",
                              "url": "/k8s/chat/describe",
                              "params": {
                                "describe": "${result}",
                                "kind": "${kind}",
                                "group": "${group}"
                              }
                            }
                          ]
                        }
                      },
                      {
                        "type": "highlightHtml",
                        "keywords": [
                          "Error",
                          "Warning"
                        ],
                        "html": "<pre>${result}</pre>"
                      }
                    ]
                  }
                ]
              }
            },
            {
              "type": "button",
              "icon": "fas fa-file-code text-success",
              "tooltip": "Yaml编辑",
              "actionType": "drawer",
              "drawer": {
                "closeOnEsc": true,
                "closeOnOutside": true,
                "size": "lg",
                "title": "Yaml管理",
                "body": [
                  {
                    "type": "tabs",
                    "tabsMode": "tiled",
                    "tabs": [
                      {
                        "title": "查看编辑",
                        "body": [
                          {
                            "type": "service",
                            "api": "get:/k8s/$kind/group/$group/version/$version/ns/$metadata.namespace/name/$metadata.name",
                            "body": [
                              {
                                "type": "form",
                                "api": "post:/k8s/$kind/group/$group/version/$version/update/ns/$metadata.namespace/name/$metadata.name",
                                "wrapWithPanel": false,
                                "body": [
                                  {
                                    "type": "editor",
                                    "name": "yaml",
                                    "size": "xxl",
                                    "allowFullscreen": true,
                                    "placeholder": "loading",
                                    "language": "yaml",
                                    "value": "${yaml}",
                                    "options": {
                                      "wordWrap": "on",
                                      "scrollbar": {
                                        "vertical": "auto"
                                      }
                                    }
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "title": "文档",
                        "body": [
                          {
                            "type": "page",
                            "asideResizor": true,
                            "asideSticky": false,
                            "asideMinWidth": 300,
                            "asideMaxWidth": 600,
                            "aside": [
                              {
                                "type": "input-tree",
                                "name": "tree",
                                "initiallyOpen": false,
                                "unfoldedLevel": 1,
                                "searchable": true,
                                "showOutline": true,
                                "showIcon": true,
                                "searchConfig": {
                                  "sticky": true
                                },
                                "selectFirst": true,
                                "heightAuto": true,
                                "inputClassName": "no-border no-padder mt-1",
                                "source": "get:/k8s/doc/gvk/${apiVersion|base64Encode}/$kind",
                                "onEvent": {
                                  "change": {
                                    "actions": [
                                      {
                                        "componentId": "detail",
                                        "actionType": "reload",
                                        "data": {
                                          "description": "${event.data.item.description}"
                                        }
                                      }
                                    ]
                                  }
                                }
                              }
                            ],
                            "toolbar": [
                              {
                                "type": "tpl",
                                "tpl": ""
                              }
                            ],
                            "body": [
                              {
                                "type": "service",
                                "api": "post:/k8s/doc/detail",
                                "body": [
                                  {
                                    "type": "tpl",
                                    "tpl": "${id}[${type}]<br>${description}</br></br></br>${translate?translate:''}",
                                    "wrapperComponent": "",
                                    "inline": false
                                  }
                                ],
                                "id": "detail"
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  }
                ]
              }
            },
            {
              "type": "dropdown-button",
              "icon": "fa fa-ellipsis-h",
              "buttons": [
                {
                  "type": "button",
                  "icon": "fa fa-list text-primary",
                  "label": "查看日志",
                  "actionType": "dialog",
                  "dialog": {
                    "closeOnEsc": true,
                    "closeOnOutside": true,
                    "title": "选择容器 (ESC 关闭)",
                    "body": [
                      {
                        "type": "select",
                        "name": "containerName",
                        "source": "${spec.containers | pick:name | map: {label: item, value: item}}",
                        "value": "${spec.containers[0].name}",
                        "required": true
                      },
                      {
                        "type": "input-number",
                        "name": "tailLines",
                        "label": "读取最近行数",
                        "value": 100,
                        "description": "设置为0将读取全部日志",
                        "min": 0
                      },
                      {
                        "type": "input-number",
                        "name": "sinceSeconds",
                        "label": "过去几秒开始读取",
                        "description": "设置读取日志的秒数，与开始时间互斥，同时设置本项优先启用",
                        "min": 0
                      },
                      {
                        "type": "input-datetime",
                        "name": "sinceTime",
                        "label": "开始时间",
                        "format": "YYYY-MM-DD HH:mm:ss",
                        "description": "与上面的秒数互斥。该时间为服务器时间，注意时区时差",
                        "placeholder": "选择开始时间",
                        "value": "${_|now|dateModify:subtract:10:minutes|dateModify:subtract:8:hours}"
                      },
                      {
                        "type": "switch",
                        "name": "timestamps",
                        "label": "显示时间戳",
                        "description": "选择时间无日志时，请开启本选项确认时间范围",
                        "value": false,
                        "onText": "是",
                        "offText": "否"
                      },
                      {
                        "type": "switch",
                        "name": "follow",
                        "label": "实时跟踪",
                        "value": true,
                        "onText": "开启",
                        "offText": "关闭"
                      },
                      {
                        "type": "switch",
                        "name": "previous",
                        "label": "读取上一个实例日志",
                        "value": false,
                        "onText": "是",
                        "offText": "否"
                      },
                      {
                        "type": "button",
                        "label": "查看日志",
                        "level": "primary",
                        "actionType": "drawer",
                        "drawer": {
                          "closeOnOutside": true,
                          "closeOnEsc": true,
                          "size": "xl",
                          "title": "日志管理 (ESC 关闭)",
                          "body": [
                            {
                              "type": "flex",
                              "justify": "flex-start",
                              "items": [
                                {
                                  "type": "button",
                                  "label": "AI问诊",
                                  "icon": "fas fa-brain text-primary",
                                  "actionType": "drawer",
                                  "drawer": {
                                    "actions": [],
                                    "closeOnEsc": true,
                                    "closeOnOutside": true,
                                    "size": "xl",
                                    "title": "解读日志 （ESC 关闭）",
                                    "body": [
                                      {
                                        "type": "websocketMarkdownViewer",
                                        "url": "/k8s/chat/log",
                                        "params": {
                                          "data": "${ls:selectedLogLines}"
                                        }
                                      }
                                    ]
                                  }
                                },
                                {
                                  "type": "log-download",
                                  "url": "/k8s/pod/logs/download/ns/${metadata.namespace}/pod_name/${metadata.name}/container/${containerName}",
                                  "data": {
                                    "containerName": "${containerName}",
                                    "tailLines": "${tailLines}",
                                    "sinceTime": "${sinceTime}",
                                    "previous": "${previous}",
                                    "timestamps": "${timestamps}",
                                    "sinceSeconds": "${sinceSeconds}"
                                  }
                                }
                              ]
                            },
                            {
                              "type": "sse",
                              "url": "/k8s/pod/logs/sse/ns/${metadata.namespace}/pod_name/${metadata.name}/container/${containerName}",
                              "data": {
                                "containerName": "${containerName}",
                                "tailLines": "${tailLines}",
                                "sinceTime": "${sinceTime}",
                                "follow": "${follow}",
                                "previous": "${previous}",
                                "timestamps": "${timestamps}",
                                "sinceSeconds": "${sinceSeconds}"
                              }
                            }
                          ]
                        },
                        "onEvent": {
                          "click": {
                            "actions": [
                              {
                                "actionType": "custom",
                                "script": "localStorage.removeItem('selectedLogLines');"
                              }
                            ]
                          }
                        }
                      }
                    ],
                    "actions": []
                  }
                },
                {
                  "type": "button",
                  "icon": "fas  fa-terminal text-primary",
                  "label": "执行命令",
                  "actionType": "drawer",
                  "drawer": {
                    "closeOnOutside": true,
                    "closeOnEsc": true,
                    "size": "xl",
                    "title": "Shell (ESC 关闭)",
                    "body": [
                      {
                        "type": "page",
                        "body": [
                          {
                            "type": "alert",
                            "level": "success",
                            "body": "温馨提示：支持输入中文指令（需开启GPT）。"
                          },
                          {
                            "type": "select",
                            "label": "容器",
                            "name": "containerName",
                            "source": "${spec.containers | pick:name | map: {label: item, value: item}}",
                            "value": "${spec.containers[0].name}"
                          },
                          {
                            "type": "form",
                            "title": "命令行输入",
                            "name": "shellForm",
                            "wrapWithPanel": false,
                            "submitText": "",
                            "controls": [
                              {
                                "type": "text",
                                "name": "command",
                                "label": "命令",
                                "placeholder": "请输入命令...",
                                "clearable": true,
                                "autoFocus": true
                              }
                            ],
                            "onEvent": {
                              "submitSucc": {
                                "actions": [
                                  {
                                    "actionType": "drawer",
                                    "drawer": {
                                      "actions": [],
                                      "closeOnEsc": true,
                                      "closeOnOutside": true,
                                      "size": "xl",
                                      "title": "执行 ${command} （ESC 关闭）",
                                      "body": [
                                        {
                                          "type": "websocketViewer",
                                          "url": "/k8s/pod/wsexec/ns/${metadata.namespace}/pod_name/${metadata.name}/container/${containerName}",
                                          "params": {
                                            "cmd": "${command}"
                                          }
                                        }
                                      ]
                                    }
                                  }
                                ]
                              }
                            },
                            "messages": {
                              "saveSuccess": ""
                            },
                            "actions": []
                          }
                        ]
                      }
                    ],
                    "actions": []
                  }
                },
                {
                  "type": "button",
                  "icon": "fas fa-folder text-primary",
                  "label": "文件管理",
                  "actionType": "drawer",
                  "drawer": {
                    "closeOnOutside": true,
                    "closeOnEsc": true,
                    "size": "xl",
                    "actions": [],
                    "title": "文件管理 ${metadata.namespace}/${metadata.name} (ESC 关闭)",
                    "body": [
                      {
                        "type": "select",
                        "name": "containerName",
                        "label": "容器",
                        "source": "${spec.containers | pick:name | map: {label: item, value: item}}",
                        "value": "${spec.containers[0].name}",
                        "onEvent": {
                          "change": {
                            "actions": [
                              {
                                "componentId": "tree",
                                "actionType": "reload",
                                "data": {
                                  "path": "${event.data.item.path}",
                                  "isDir": "${event.data.item.isDir}"
                                }
                              }
                            ]
                          }
                        }
                      },
                      {
                        "type": "page",
                        "asideResizor": true,
                        "asideMinWidth": 400,
                        "asideMaxWidth": 800,
                        "aside": [
                          {
                            "type": "input-tree",
                            "name": "tree",
                            "id": "tree",
                            "initiallyOpen": false,
                            "unfoldedLevel": 1,
                            "searchable": true,
                            "showOutline": true,
                            "showIcon": true,
                            "searchConfig": {
                              "sticky": true
                            },
                            "heightAuto": true,
                            "inputClassName": "no-border no-padder mt-1",
                            "source": {
                              "method": "post",
                              "url": "/k8s/file/list?path=/",
                              "data": {
                                "containerName": "${containerName}",
                                "podName": "${metadata.name}",
                                "namespace": "${metadata.namespace}"
                              }
                            },
                            "deferApi": {
                              "method": "post",
                              "url": "/k8s/file/list?path=$path",
                              "data": {
                                "containerName": "${containerName}",
                                "podName": "${metadata.name}",
                                "namespace": "${metadata.namespace}",
                                "path": "$path",
                                "isDir": "$isDir"
                              }
                            },
                            "labelField": "name",
                            "valueField": "path",
                            "deferField": "isDir",
                            "onEvent": {
                              "change": {
                                "actions": [
                                  {
                                    "actionType": "setValue",
                                    "componentId": "fileContext",
                                    "args": {
                                      "value": ""
                                    }
                                  },
                                  {
                                    "componentId": "detail",
                                    "actionType": "reload",
                                    "data": {
                                      "path": "${event.data.item.path}",
                                      "isDir": "${event.data.item.isDir}",
                                      "size": "${event.data.item.size}",
                                      "type": "${event.data.item.type}",
                                      "modTime": "${event.data.item.modTime}",
                                      "owner": "${event.data.item.owner}",
                                      "group": "${event.data.item.group}",
                                      "permissions": "${event.data.item.permissions}"
                                    }
                                  }
                                ]
                              }
                            }
                          }
                        ],
                        "toolbar": [],
                        "body": [
                          {
                            "type": "service",
                            "api": {
                              "method": "post",
                              "url": "/k8s/file/show",
                              "data": {
                                "containerName": "${containerName}",
                                "podName": "${metadata.name}",
                                "namespace": "${metadata.namespace}",
                                "isDir": "${isDir?isDir:false}",
                                "path": "${path}",
                                "size": "${size?size:0}",
                                "type": "${type}"
                              }
                            },
                            "body": [
                              {
                                "type": "form",
                                "title": "编辑",
                                "api": {
                                  "method": "post",
                                  "url": "/k8s/file/save",
                                  "data": {
                                    "fileContext": "${fileContext | base64Encode}",
                                    "path": "${path}",
                                    "containerName": "${containerName}",
                                    "podName": "${metadata.name}",
                                    "namespace": "${metadata.namespace}",
                                    "isDir": false
                                  }
                                },
                                "inline": true,
                                "body": [
                                  {
                                    "type": "wrapper",
                                    "size": "lg",
                                    "className": "b",
                                    "body": [
                                      {
                                        "type": "tpl",
                                        "tpl": "<span class='text-primary bg-yellow-100 p-2 rounded'>${isDir?'Folder':'File'}</span>",
                                        "visibleOn": "${path}",
                                        "className": "mr-2"
                                      },
                                      {
                                        "type": "button",
                                        "label": "上传文件",
                                        "visibleOn": "${isDir===true}",
                                        "icon": "fa fa-upload",
                                        "actionType": "dialog",
                                        "className": "mr-2",
                                        "dialog": {
                                          "closeOnEsc": true,
                                          "closeOnOutside": true,
                                          "title": "上传文件 到 ${path} (ESC 关闭)",
                                          "body": [
                                            {
                                              "type": "page",
                                              "body": {
                                                "type": "form",
                                                "body": [
                                                  {
                                                    "type": "input-file",
                                                    "name": "file",
                                                    "accept": "*",
                                                    "asBlob": true,
                                                    "drag": true
                                                  },
                                                  {
                                                    "type": "input-text",
                                                    "name": "fileName",
                                                    "label": "文件名",
                                                    "value": "${file.name ||file[0].name ||file[0].path ||file.path ||''}"
                                                  }
                                                ],
                                                "actions": [
                                                  {
                                                    "type": "button",
                                                    "label": "上传",
                                                    "level": "primary",
                                                    "actionType": "ajax",
                                                    "close": true,
                                                    "api": {
                                                      "method": "post",
                                                      "url": "/k8s/file/upload",
                                                      "data": {
                                                        "containerName": "${containerName}",
                                                        "podName": "${metadata.name}",
                                                        "namespace": "${metadata.namespace}",
                                                        "isDir": "${isDir?isDir:false}",
                                                        "path": "${path}",
                                                        "file": "${file}",
                                                        "fileName": "${fileName}"
                                                      }
                                                    }
                                                  }
                                                ]
                                              }
                                            }
                                          ],
                                          "actions": []
                                        }
                                      },
                                      {
                                        "type": "button",
                                        "icon": "fa fa-download",
                                        "label": "下载",
                                        "actionType": "ajax",
                                        "api": {
                                          "method": "post",
                                          "url": "/k8s/file/download",
                                          "data": {
                                            "path": "${path}",
                                            "containerName": "${containerName}",
                                            "podName": "${metadata.name}",
                                            "namespace": "${metadata.namespace}",
                                            "isDir": false
                                          },
                                          "responseType": "blob"
                                        },
                                        "onEvent": {
                                          "submit": {
                                            "actions": [
                                              {
                                                "actionType": "custom",
                                                "script": "downloadFile(event.data)"
                                              }
                                            ]
                                          }
                                        },
                                        "visibleOn": "${isDir===false}",
                                        "className": "mr-2"
                                      },
                                      {
                                        "type": "button",
                                        "icon": "fa fa-refresh",
                                        "actionType": "reload",
                                        "label": "刷新",
                                        "target": "detail",
                                        "visibleOn": "${isDir===false}",
                                        "className": "mr-2"
                                      },
                                      {
                                        "type": "button",
                                        "icon": "fas fa-trash text-danger",
                                        "actionType": "ajax",
                                        "label": "删除",
                                        "visibleOn": "${path}",
                                        "confirmText": "您确认要删除$path?",
                                        "api": {
                                          "method": "post",
                                          "url": "/k8s/file/delete",
                                          "data": {
                                            "path": "${path}",
                                            "containerName": "${containerName}",
                                            "podName": "${metadata.name}",
                                            "namespace": "${metadata.namespace}",
                                            "isDir": false
                                          }
                                        },
                                        "className": "mr-2"
                                      },
                                      {
                                        "type": "tpl",
                                        "tpl": " &nbsp;<span class='text-primary '>${path}</span> &nbsp;<span class='text-primary '>${size|formatBytes}</span> &nbsp;<span class='text-primary '>${modTime|formatLsShortDate}</span>  &nbsp;<span class='text-primary '>${permissions}</span>&nbsp;<span class='text-primary '>${owner}:${group}</span>",
                                        "visibleOn": "${path}",
                                        "className": "mr-2"
                                      }
                                    ]
                                  },
                                  {
                                    "type": "editor",
                                    "name": "fileContext",
                                    "id": "fileContext",
                                    "size": "xxl",
                                    "allowFullscreen": true,
                                    "visibleOn": "${isDir===false}",
                                    "value": "${content|base64Decode}",
                                    "language": "shell",
                                    "options": {
                                      "wordWrap": "on",
                                      "scrollbar": {
                                        "vertical": "auto"
                                      }
                                    }
                                  }
                                ]
                              }
                            ],
                            "id": "detail"
                          }
                        ]
                      }
                    ]
                  }
                },
                {
                  "type": "button",
                  "icon": "fas fa-calendar-alt text-primary",
                  "label": "查看事件",
                  "actionType": "drawer",
                  "drawer": {
                    "closeOnEsc": true,
                    "closeOnOutside": true,
                    "size": "xl",
                    "title": "查看事件   (ESC 关闭)",
                    "body": [
                      {
                        "type": "crud",
                        "id": "detailEvent",
                        "name": "detailEvent",
                        "headerToolbar": [
                          "reload",
                          {
                            "type": "pagination",
                            "align": "right"
                          },
                          {
                            "type": "statistics",
                            "align": "right"
                          },
                          {
                            "type": "switch-per-page",
                            "align": "right"
                          }
                        ],
                        "loadDataOnce": true,
                        "syncLocation": false,
                        "perPage": 10,
                        "api": "get:/k8s/$kind/group/$group/version/$version/ns/$metadata.namespace/name/$metadata.name/event",
                        "columns": [
                          {
                            "type": "operation",
                            "label": "操作",
                            "buttons": [
                              {
                                "type": "button",
                                "icon": "fas fa-brain text-primary",
                                "label": "AI问诊",
                                "actionType": "drawer",
                                "drawer": {
                                  "closeOnEsc": true,
                                  "closeOnOutside": true,
                                  "size": "lg",
                                  "title": "AI 查询",
                                  "body": [
                                    {
                                      "type": "websocketMarkdownViewer",
                                      "url": "/k8s/chat/event",
                                      "params": {
                                        "note": "${note}",
                                        "source": "${source}",
                                        "reason": "${reason}",
                                        "reportingController": "${reportingController}",
                                        "type": "${type}",
                                        "regardingKind": "${kind}"
                                      }
                                    }
                                  ]
                                },
                                "visibleOn": "type === 'Warning'"
                              }
                            ],
                            "toggled": true
                          },
                          {
                            "name": "type",
                            "label": "类型",
                            "filterable": {
                              "options": [
                                {
                                  "label": "正常 ",
                                  "value": "Normal"
                                },
                                {
                                  "label": "告警 ",
                                  "value": "Warning"
                                }
                              ]
                            },
                            "type": "mapping",
                            "map": {
                              "Normal": "<span class='label label-success'>正常</span>",
                              "Warning": "<span class='label label-danger'>告警</span>"
                            }
                          },
                          {
                            "name": "reason",
                            "label": "原因",
                            "type": "text"
                          },
                          {
                            "name": "field",
                            "label": "关联字段",
                            "type": "tpl",
                            "tpl": "${regarding.fieldPath}"
                          },
                          {
                            "name": "source",
                            "label": "事件来源",
                            "type": "tpl",
                            "tpl": "${reportingController} ${reportingInstance}"
                          },
                          {
                            "name": "note",
                            "label": "说明",
                            "type": "text",
                            "searchable": true
                          },
                          {
                            "name": "metadata.creationTimestamp",
                            "label": "存在时长",
                            "type": "k8sAge"
                          }
                        ]
                      }
                    ]
                  }
                },
                {
                  "label": "资源用量",
                  "type": "button",
                  "icon": "fas fa-percentage text-primary",
                  "actionType": "dialog",
                  "dialog": {
                    "closeOnEsc": true,
                    "closeOnOutside": true,
                    "title": "资源使用详情 (ESC关闭)",
                    "size": "lg",
                    "body": {
                      "type": "service",
                      "api": "get:/k8s/pod/usage/ns/${metadata.namespace}/name/${metadata.name}",
                      "body": {
                        "type": "table",
                        "columns": [
                          {
                            "label": "资源类型",
                            "name": "resourceType"
                          },
                          {
                            "label": "总量",
                            "name": "total"
                          },
                          {
                            "label": "请求量",
                            "name": "request"
                          },
                          {
                            "label": "请求占比 (%)",
                            "name": "requestFraction",
                            "type": "tpl",
                            "tpl": "<span class='label <% if (data.requestFraction > 80) { %>label-danger<% } else if (data.requestFraction > 50) { %>label-warning<% } else { %>label-success<% } %>'> <%= data.requestFraction %> % </span>"
                          },
                          {
                            "label": "限制量",
                            "name": "limit"
                          },
                          {
                            "label": "限制占比 (%)",
                            "name": "limitFraction",
                            "type": "tpl",
                            "tpl": "<span class='label <% if (data.limitFraction > 80) { %>label-danger<% } else if (data.limitFraction > 50) { %>label-warning<% } else { %>label-success<% } %>'> <%= data.limitFraction %> % </span>"
                          }
                        ]
                      }
                    }
                  }
                },
                {
                  "label": "关联资源",
                  "type": "button",
                  "icon": "fas fa-code-branch text-primary",
                  "actionType": "drawer",
                  "drawer": {
                    "closeOnEsc": true,
                    "closeOnOutside": true,
                    "title": "容器组 ${metadata.namespace}/${metadata.name}-${status.podIP} 关联资源 （ESC 关闭）",
                    "size": "xl",
                    "body": {
                      "type": "tabs",
                      "tabs": [
                        {
                          "title": "Service网络",
                          "body": {
                            "type": "crud",
                            "loadDataOnce": true,
                            "headerToolbar": [
                              "reload"
                            ],
                            "api": "/k8s/pod/ns/${metadata.namespace}/name/${metadata.name}/links/services",
                            "columns": [
                              {
                                "name": "metadata.name",
                                "label": "Service 名称",
                                "type": "text"
                              },
                              {
                                "name": "spec.type",
                                "label": "访问类型",
                                "type": "tpl",
                                "tpl": "<% if (data.spec && data.spec.type === 'ClusterIP' && data.spec.clusterIP === 'None') { %><span class='label label-warning'>Headless</span><% } else { %><span class='label label-success'><%= data.spec.type %></span><% } %>"
                              },
                              {
                                "name": "spec.clusterIP",
                                "label": "访问地址",
                                "type": "text"
                              },
                              {
                                "name": "spec.ports",
                                "label": "访问端口<br><span class='text-gray-500 text-xs'>访问端口[:节点端口]/协议 => 容器端口</span>",
                                "type": "each",
                                "items": {
                                  "type": "tpl",
                                  "tpl": "<div>${port}${nodePort?':<span class=\"text text-danger font-black\">'+nodePort+'</span>':''}/${protocol}  <span class=\"text text-success font-black\">=>${targetPort}</span></div>"
                                }
                              },
                              {
                                "name": "spec.sessionAffinity",
                                "label": "会话亲和性",
                                "type": "mapping",
                                "map": {
                                  "ClientIP": "<span class='label label-danger'>ClientIP</span>",
                                  "None": "<span class='label label-success'>None</span>"
                                }
                              },
                              {
                                "name": "metadata.creationTimestamp",
                                "label": "存在时长",
                                "type": "k8sAge"
                              }
                            ]
                          }
                        },
                        {
                          "title": "端点",
                          "body": {
                            "type": "crud",
                            "loadDataOnce": true,
                            "headerToolbar": [
                              "reload"
                            ],
                            "api": "/k8s/pod/ns/${metadata.namespace}/name/${metadata.name}/links/endpoints",
                            "columns": [
                              {
                                "name": "metadata.name",
                                "label": "端点 名称",
                                "type": "text"
                              },
                              {
                                "name": "subsets",
                                "label": "就绪IP",
                                "type": "tpl",
                                "tpl": "<% if (!data.subsets || !data.subsets[0].addresses || data.subsets[0].addresses.length === 0) { %> <% } else if (data.subsets[0].addresses.length === 1) { %><span class='text-green-500 font-black'><%= data.subsets[0].addresses[0].ip %></span><% } else { %><span class='text-green-500 font-black'><%= data.subsets[0].addresses[0].ip %>...</span><% } %>",
                                "popOver": {
                                  "trigger": "hover",
                                  "showIcon": false,
                                  "body": {
                                    "type": "each",
                                    "source": "${subsets}",
                                    "items": {
                                      "type": "tpl",
                                      "tpl": "<span class='text-green-500 font-black'>${addresses|pick:ip|join:'<br>'}</span>"
                                    }
                                  }
                                },
                                "badge": {
                                  "visibleOn": "this.subsets[0].addresses.length > 1",
                                  "animation": true,
                                  "level": "error",
                                  "position": "top-left"
                                }
                              },
                              {
                                "name": "subsets",
                                "label": "未就绪IP",
                                "type": "tpl",
                                "tpl": "<% if (!data.subsets || !data.subsets[0].notReadyAddresses || data.subsets[0].notReadyAddresses.length === 0) { %> <% } else if (data.subsets[0].notReadyAddresses.length === 1) { %><span class='text-red-500 font-black'><%= data.subsets[0].notReadyAddresses[0].ip %></span><% } else { %><span class='text-red-500 font-black'><%= data.subsets[0].notReadyAddresses[0].ip %>...</span><% } %>",
                                "popOver": {
                                  "trigger": "hover",
                                  "showIcon": false,
                                  "body": {
                                    "type": "each",
                                    "source": "${subsets}",
                                    "items": {
                                      "type": "tpl",
                                      "tpl": "<span class='text-red-500 font-black'>${notReadyAddresses|pick:ip|join:'<br>'}</span>"
                                    }
                                  }
                                },
                                "badge": {
                                  "visibleOn": "this.subsets[0].notReadyAddresses.length > 1",
                                  "animation": true,
                                  "level": "error",
                                  "position": "top-left"
                                }
                              },
                              {
                                "name": "metadata.creationTimestamp",
                                "label": "存在时长",
                                "type": "k8sAge"
                              }
                            ]
                          }
                        },
                        {
                          "title": "存储卷声明",
                          "body": {
                            "type": "crud",
                            "loadDataOnce": true,
                            "headerToolbar": [
                              "reload"
                            ],
                            "api": "/k8s/pod/ns/${metadata.namespace}/name/${metadata.name}/links/pvc",
                            "columns": [
                              {
                                "name": "metadata.name",
                                "label": "名称",
                                "type": "text",
                                "width": "180px",
                                "copyable": true,
                                "sortable": true
                              },
                              {
                                "name": "status.phase",
                                "label": "状态",
                                "type": "mapping",
                                "map": {
                                  "Bound": "<span class='label label-success'>已绑定</span>",
                                  "Lost": "<span class='label label-danger'>丢失</span>",
                                  "Pending": "<span class='label label-warning'>未绑定</span>"
                                }
                              },
                              {
                                "name": "request",
                                "label": "申请容量",
                                "type": "tpl",
                                "tpl": "${spec.resources.requests.storage}"
                              },
                              {
                                "name": "capacity",
                                "label": "存储容积",
                                "type": "tpl",
                                "tpl": "${status.capacity.storage}"
                              },
                              {
                                "name": "spec.accessModes",
                                "label": "访问模式",
                                "type": "tpl",
                                "tpl": "<%= data.spec.accessModes.map(item => item === 'ReadWriteOnce' ? '<span class=\\'label label-success\\'>单路读写</span>' : item === 'ReadOnlyMany' ? '<span class=\\'label label-warning\\'>多路只读</span>' : item === 'ReadWriteMany' ? '<span class=\\'label label-info\\'>多路读写</span>' : '').join(' ') %>"
                              },
                              {
                                "name": "spec.volumeMode",
                                "label": "卷模式",
                                "type": "mapping",
                                "map": {
                                  "Filesystem": "<span class='label label-success'>文件系统</span>",
                                  "Block": "<span class='label label-warning'>块设备</span>"
                                }
                              },
                              {
                                "name": "metadata.creationTimestamp",
                                "label": "存在时长",
                                "type": "k8sAge"
                              }
                            ]
                          }
                        },
                        {
                          "title": "Ingress入口",
                          "body": {
                            "type": "crud",
                            "loadDataOnce": true,
                            "headerToolbar": [
                              "reload"
                            ],
                            "api": "/k8s/pod/ns/${metadata.namespace}/name/${metadata.name}/links/ingress",
                            "columns": [
                              {
                                "name": "metadata.name",
                                "label": "名称",
                                "type": "text"
                              },
                              {
                                "name": "spec.rules",
                                "label": "访问规则",
                                "type": "tpl",
                                "tpl": "<% if (data.spec.rules && data.spec.rules.length) { %><% data.spec.rules.forEach(function(rule) { %><div style='display: inline-block; margin-right: 20px; padding: 10px;'>域名: <%- rule.host || '*' %><br><% if (rule.http && rule.http.paths && rule.http.paths.length) { %><% rule.http.paths.forEach(function(path) { %><% if (path.backend && path.backend.service) { %>路径: <%- path.path %> → 服务: <%- path.backend.service.name %><br><% } %><% }); %><% } %></div><% }); %><% } %>"
                              },
                              {
                                "name": "metadata.creationTimestamp",
                                "label": "存在时长",
                                "type": "k8sAge"
                              }
                            ]
                          }
                        },
                        {
                          "title": "定义环境变量",
                          "body": {
                            "type": "crud",
                            "autoGenerateFilter": {
                              "columnsNum": 3,
                              "showBtnToolbar": false
                            },
                            "headerToolbar": [
                              {
                                "type": "columns-toggler",
                                "align": "right",
                                "draggable": true,
                                "icon": "fas fa-cog",
                                "overlay": true,
                                "footerBtnSize": "sm"
                              },
                              "reload",
                              {
                                "type": "pagination",
                                "align": "right"
                              },
                              {
                                "type": "statistics",
                                "align": "right"
                              },
                              {
                                "type": "switch-per-page",
                                "align": "right"
                              }
                            ],
                            "loadDataOnce": true,
                            "api": "/k8s/pod/ns/${metadata.namespace}/name/${metadata.name}/links/envFromPod",
                            "columns": [
                              {
                                "name": "containerName",
                                "label": "容器",
                                "type": "text"
                              },
                              {
                                "name": "envName",
                                "label": "环境变量名称",
                                "type": "text",
                                "sortable": true,
                                "searchable": true
                              },
                              {
                                "name": "envValue",
                                "label": "环境变量值",
                                "type": "text",
                                "sortable": true,
                                "searchable": true
                              }
                            ]
                          }
                        },
                        {
                          "title": "运行时环境变量",
                          "body": {
                            "type": "crud",
                            "autoGenerateFilter": {
                              "columnsNum": 3,
                              "showBtnToolbar": false
                            },
                            "headerToolbar": [
                              {
                                "type": "columns-toggler",
                                "align": "right",
                                "draggable": true,
                                "icon": "fas fa-cog",
                                "overlay": true,
                                "footerBtnSize": "sm"
                              },
                              "reload",
                              {
                                "type": "pagination",
                                "align": "right"
                              },
                              {
                                "type": "statistics",
                                "align": "right"
                              },
                              {
                                "type": "switch-per-page",
                                "align": "right"
                              }
                            ],
                            "loadDataOnce": true,
                            "api": "/k8s/pod/ns/${metadata.namespace}/name/${metadata.name}/links/env",
                            "columns": [
                              {
                                "name": "containerName",
                                "label": "容器",
                                "type": "text"
                              },
                              {
                                "name": "envName",
                                "label": "环境变量名称",
                                "type": "text",
                                "sortable": true,
                                "searchable": true
                              },
                              {
                                "name": "envValue",
                                "label": "环境变量值",
                                "type": "text",
                                "sortable": true,
                                "searchable": true
                              }
                            ]
                          }
                        },
                        {
                          "title": "配置映射",
                          "body": {
                            "type": "crud",
                            "loadDataOnce": true,
                            "headerToolbar": [
                              "reload"
                            ],
                            "api": "/k8s/pod/ns/${metadata.namespace}/name/${metadata.name}/links/configmap",
                            "columns": [
                              {
                                "name": "metadata.name",
                                "label": "名称",
                                "type": "text"
                              },
                              {
                                "name": "metadata.annotations.configMapMounts",
                                "label": "挂载信息",
                                "type": "tpl",
                                "tpl": "<% const mounts = (data.metadata.annotations && data.metadata.annotations.configMapMounts) ? JSON.parse(data.metadata.annotations.configMapMounts) : []; %><% if (mounts.length > 0) { %><% mounts.forEach((item) => { %>挂载文件夹: <%= item.mountPath + (item.subPath ? '/' + item.subPath : '') %>, 模式: <%= '0' + (item.mode || 0).toString(8) %>, 只读: <%= item.readOnly ? '是' : '否' %><br><% }); %><% } else { %>没有挂载信息<% } %>"
                              },
                              {
                                "label": "文件列表",
                                "type": "each",
                                "name": "data",
                                "items": {
                                  "type": "button",
                                  "level": "link",
                                  "label": "${key}",
                                  "actionType": "drawer",
                                  "drawer": {
                                    "size": "lg",
                                    "closeOnEsc": true,
                                    "closeOnOutside": true,
                                    "title": "查看 ${metadata.name}-${key} 文件内容 (ESC 关闭)",
                                    "body": [
                                      {
                                        "type": "editor",
                                        "name": "yaml",
                                        "size": "xxl",
                                        "allowFullscreen": true,
                                        "placeholder": "loading",
                                        "language": "yaml",
                                        "value": "${value}",
                                        "options": {
                                          "wordWrap": "on",
                                          "scrollbar": {
                                            "vertical": "auto"
                                          }
                                        }
                                      }
                                    ]
                                  }
                                }
                              },
                              {
                                "name": "metadata.creationTimestamp",
                                "label": "存在时长",
                                "type": "k8sAge"
                              }
                            ]
                          }
                        },
                        {
                          "title": "密钥",
                          "body": {
                            "loadDataOnce": true,
                            "headerToolbar": [
                              "reload"
                            ],
                            "type": "crud",
                            "api": "/k8s/pod/ns/${metadata.namespace}/name/${metadata.name}/links/secret",
                            "columns": [
                              {
                                "name": "metadata.name",
                                "label": "名称",
                                "type": "text"
                              },
                              {
                                "name": "type",
                                "label": "类型",
                                "type": "mapping",
                                "map": {
                                  "Opaque": "<span class='label label-primary'>自定义数据</span>",
                                  "kubernetes.io/service-account-token": "<span class='label label-primary'>服务账户令牌</span>",
                                  "kubernetes.io/dockercfg": "<span class='label label-info'>旧版镜像凭证</span>",
                                  "kubernetes.io/dockerconfigjson": "<span class='label label-success'>镜像凭证</span>",
                                  "kubernetes.io/basic-auth": "<span class='label label-warning'>Basic Auth 凭证</span>",
                                  "kubernetes.io/ssh-auth": "<span class='label label-warning'>SSH 凭证</span>",
                                  "kubernetes.io/tls": "<span class='label label-danger'>TLS 凭证</span>",
                                  "bootstrap.kubernetes.io/token": "<span class='label label-default'>引导令牌</span>",
                                  "*": "<span class='label label-primary'>${type}</span>"
                                }
                              },
                              {
                                "name": "metadata.annotations.secretMounts",
                                "label": "挂载信息",
                                "type": "tpl",
                                "tpl": "<% const mounts = (data.metadata.annotations && data.metadata.annotations.secretMounts) ? JSON.parse(data.metadata.annotations.secretMounts) : []; %><% if (mounts.length > 0) { %><% mounts.forEach((item) => { %>挂载文件夹: <%= item.mountPath + (item.subPath ? '/' + item.subPath : '') %>, 模式: <%= '0' + (item.mode || 0).toString(8) %>, 只读: <%= item.readOnly ? '是' : '否' %><br><% }); %><% } else { %>没有挂载信息<% } %>"
                              },
                              {
                                "label": "文件列表",
                                "type": "each",
                                "name": "data",
                                "items": {
                                  "type": "button",
                                  "level": "link",
                                  "label": "${key}",
                                  "actionType": "drawer",
                                  "drawer": {
                                    "size": "lg",
                                    "closeOnEsc": true,
                                    "closeOnOutside": true,
                                    "title": "查看 ${metadata.name}-${key} 文件内容 (ESC 关闭)",
                                    "body": [
                                      {
                                        "type": "editor",
                                        "name": "yaml",
                                        "size": "xxl",
                                        "allowFullscreen": true,
                                        "placeholder": "loading",
                                        "language": "yaml",
                                        "value": "${value| base64Decode}",
                                        "options": {
                                          "wordWrap": "on",
                                          "scrollbar": {
                                            "vertical": "auto"
                                          }
                                        }
                                      }
                                    ]
                                  }
                                }
                              },
                              {
                                "name": "metadata.creationTimestamp",
                                "label": "存在时长",
                                "type": "k8sAge"
                              }
                            ]
                          }
                        }
                      ]
                    }
                  }
                },
                {
                  "type": "button",
                  "icon": "fas fa-trash text-danger",
                  "label": "删除",
                  "actionType": "ajax",
                  "confirmText": "您确认要删除$metadata.name?",
                  "api": "post:/k8s/$kind/group/$group/version/$version/remove/ns/$metadata.namespace/name/$metadata.name"
                }
              ]
            }
          ],
          "toggled": true
        },
        {
          "name": "metadata.namespace",
          "label": "命名空间",
          "type": "text",
          "sortable": true
        },
        {
          "name": "metadata.name",
          "label": "名称",
          "type": "text",
          "width": "180px",
          "copyable": true,
          "sortable": true,
          "searchable": {
            "type": "input-text",
            "name": "metadata.name",
            "label": "名称",
            "placeholder": "输入名称"
          }
        },
        {
          "name": "ready",
          "label": "就绪",
          "type": "k8sPodReady"
        },
        {
          "name": "status.phase",
          "label": "状态",
          "type": "mapping",
          "map": {
            "Running": "<span class='label label-success'>运行中</span>",
            "Pending": "<span class='label label-warning'>调度中</span>",
            "Succeeded": "<span class='label label-info'>成功完成</span>",
            "Failed": "<span class='label label-danger'>失败</span>",
            "Unknown": "<span class='label label-warning'>未知</span>"
          },
          "searchable": {
            "type": "select",
            "name": "status.phase",
            "label": "状态",
            "placeholder": "选择状态",
            "options": [
              {
                "label": "运行中",
                "value": "Running"
              },
              {
                "label": "调度中",
                "value": "Pending"
              },
              {
                "label": "成功完成",
                "value": "Succeeded"
              },
              {
                "label": "失败",
                "value": "Failed"
              },
              {
                "label": "未知",
                "value": "Unknown"
              }
            ]
          }
        },
        {
          "name": "status.podIP",
          "label": "容器组IP",
          "type": "text",
          "searchable": true,
          "sortable": true
        },
        {
          "name": "status.qosClass",
          "label": "保障等级",
          "type": "mapping",
          "map": {
            "Guaranteed": "<span class='label label-success'>保证型</span>",
            "Burstable": "<span class='label label-warning'>可突增型</span>",
            "BestEffort": "<span class='label label-danger'>尽力型</span>"
          },
          "searchable": {
            "type": "select",
            "name": "status.qosClass",
            "label": "保障等级",
            "placeholder": "选择保障等级",
            "options": [
              {
                "label": "保证型",
                "value": "Guaranteed"
              },
              {
                "label": "可突增型",
                "value": "Burstable"
              },
              {
                "label": "尽力型",
                "value": "BestEffort"
              }
            ]
          }
        },
        {
          "name": "spec.containers",
          "label": "容器镜像<br><span class='text-gray-500 text-xs'>容器名称=>镜像:版本</span>",
          "width": "150px",
          "type": "each",
          "items": {
            "type": "tpl",
            "tpl": "<div style='margin-bottom: 10px;'><strong class='text-green-500 font-black'>${name}</strong>=>${image|simpleImageName}</div>"
          }
        },
        {
          "name": "status.containerStatuses",
          "label": "重启次数",
          "type": "tpl",
          "tpl": "${status.containerStatuses|pick:restartCount | map  | sum }"
        },
        {
          "name": "资源设定",
          "label": "资源设定<br><span class='text-gray-500 text-xs'>请求<设定<上限</span>",
          "width": "180px",
          "type": "tpl",
          "tpl": "<% for (var i = 0; i < data.spec.containers.length; i++) { %><% var container = data.spec.containers[i]; var requests = container?.resources?.requests || {}; var limits = container?.resources?.limits || {}; var cpuRequest = requests.cpu || null; var cpuLimit = limits.cpu || null; var memoryRequest = requests.memory || null; var memoryLimit = limits.memory || null; %><% if (cpuRequest || cpuLimit || memoryRequest || memoryLimit) { %><strong>容器：<%= container.name || '未知' %></strong><br><% if (cpuRequest || cpuLimit) { %><strong class='text-blue-500 font-black'><%= cpuRequest || '0' %> ≦处理器≦ <%= cpuLimit || '♾️' %></strong><br><% } %><% if (memoryRequest || memoryLimit) { %><strong class='text-green-500 font-black'><%= memoryRequest || '0' %> ≦内存≦ <%= memoryLimit || '♾️' %></strong><br><% } %><% if (i < data.spec.containers.length - 1) { %><br><% } %><% } %><% } %>"
        },
        {
          "name": "resource",
          "label": "CPU资源<br><span class='text-gray-500 text-xs'>请求用量/上限用量</span>",
          "type": "container",
          "width": "150px",
          "body": [
            {
              "type": "progress",
              "label": "request",
              "value": "<%= data.metadata.annotations['cpu.requestFraction'] %>",
              "placeholder": "N/A",
              "animate": true,
              "width": "100px",
              "map": [
                "bg-success",
                "bg-success",
                "bg-success",
                "bg-warning",
                "bg-danger"
              ]
            },
            {
              "type": "progress",
              "label": "limit",
              "value": "<%= data.metadata.annotations['cpu.limitFraction'] %>",
              "placeholder": "N/A",
              "animate": true,
              "width": "100px",
              "map": [
                "bg-success",
                "bg-success",
                "bg-success",
                "bg-warning",
                "bg-danger"
              ]
            }
          ]
        },
        {
          "name": "resource",
          "label": "内存资源<br><span class='text-gray-500 text-xs'>请求用量/上限用量</span>",
          "type": "container",
          "width": "150px",
          "body": [
            {
              "type": "progress",
              "label": "request",
              "value": "<%= data.metadata.annotations['memory.requestFraction'] %>",
              "placeholder": "N/A",
              "animate": true,
              "width": "100px",
              "map": [
                "bg-success",
                "bg-success",
                "bg-success",
                "bg-warning",
                "bg-danger"
              ]
            },
            {
              "type": "progress",
              "label": "limit",
              "value": "<%= data.metadata.annotations['memory.limitFraction'] %>",
              "placeholder": "N/A",
              "animate": true,
              "width": "100px",
              "map": [
                "bg-success",
                "bg-success",
                "bg-success",
                "bg-warning",
                "bg-danger"
              ]
            }
          ]
        },
        {
          "name": "metadata.labels",
          "label": "标签",
          "type": "tpl",
          "tpl": "${metadata.labels ? '<i class=\"fa fa-tags text-primary\"></i>' : ''}",
          "onEvent": {
            "click": {
              "actions": [
                {
                  "actionType": "dialog",
                  "dialog": {
                    "title": "${metadata.name} 标签 (ESC 关闭)",
                    "body": {
                      "type": "json",
                      "source": "${metadata.labels}",
                      "levelExpand": 1
                    },
                    "size": "lg",
                    "closeOnEsc": true,
                    "closeOnOutside": true
                  }
                }
              ]
            }
          },
          "style": {
            "cursor": "pointer"
          }
        },
        {
          "name": "metadata.annotations",
          "label": "注解",
          "type": "tpl",
          "tpl": "${metadata.annotations ? '<i class=\"fa fa-note-sticky text-primary\"></i>' : ''}",
          "onEvent": {
            "click": {
              "actions": [
                {
                  "actionType": "dialog",
                  "dialog": {
                    "title": "${metadata.name} annotations (ESC 关闭)",
                    "body": {
                      "type": "json",
                      "source": "${metadata.annotations}",
                      "levelExpand": 1
                    },
                    "size": "lg",
                    "closeOnEsc": true,
                    "closeOnOutside": true
                  }
                }
              ]
            }
          },
          "style": {
            "cursor": "pointer"
          }
        },
        {
          "name": "status.conditions",
          "label": "条件",
          "type": "k8sConditions"
        },
        {
          "name": "spec.tolerations",
          "label": "容忍",
          "type": "tpl",
          "tpl": "${spec.tolerations ? '<i class=\"fa fa-exclamation-triangle text-danger\"></i>' : ''}",
          "onEvent": {
            "click": {
              "actions": [
                {
                  "actionType": "dialog",
                  "dialog": {
                    "title": "${metadata.name} 容忍度 (ESC 关闭)",
                    "body": [
                      {
                        "type": "panel",
                        "title": "操作符（Operator）代表了对污点（键、值、效果）的容忍程度",
                        "body": {
                          "type": "tpl",
                          "tpl": "<div><div><strong>等于:</strong>Equal - 键等于值</div><div><strong>存在:</strong>Exists - 键存在,值可以为任意值</div></div>"
                        }
                      },
                      {
                        "type": "table",
                        "source": "${spec.tolerations}",
                        "columns": [
                          {
                            "name": "operator",
                            "label": "操作符",
                            "placeholder": "-",
                            "type": "mapping",
                            "map": {
                              "Equal": "<span class='label label-success'>等于</span>",
                              "Exists": "<span class='label label-success'>存在</span>"
                            }
                          },
                          {
                            "name": "key",
                            "label": "键"
                          },
                          {
                            "name": "value",
                            "label": "值",
                            "placeholder": "-"
                          },
                          {
                            "name": "effect",
                            "label": "效果",
                            "type": "mapping",
                            "map": {
                              "NoSchedule": "<span class='label label-warning'>禁止调度</span>",
                              "PreferNoSchedule": "<span class='label label-danger'>优先不调度</span>",
                              "NoExecute": "<span class='label label-danger'>不可执行</span>"
                            }
                          }
                        ]
                      }
                    ],
                    "size": "lg",
                    "closeOnEsc": true,
                    "closeOnOutside": true
                  }
                }
              ]
            }
          },
          "style": {
            "cursor": "pointer"
          }
        },
        {
          "name": "spec.hostNetwork",
          "label": "网络类型",
          "width": "150px",
          "sortable": true,
          "type": "tpl",
          "tpl": "<% if (data.spec.hostNetwork) { %><span class='label label-danger'>主机网络</span><% } else { %><span class='label label-success'>容器网络</span><% } %>"
        },
        {
          "name": "spec.nodeName",
          "label": "所在节点",
          "type": "text",
          "searchable": true,
          "width": "150px",
          "sortable": true
        },
        {
          "name": "metadata.creationTimestamp",
          "label": "存在时长",
          "type": "k8sAge"
        }
      ]
    }
  ]
}